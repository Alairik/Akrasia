name: Deploy to FTP

on:
  push:
    branches:
      - claude/akrasia-website-setup-etol2

jobs:
  deploy:
    name: Deploy to Wedos FTP
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Upload root .htaccess via FTP
        run: |
          curl -s -T _server/.htaccess \
            "ftp://${{ secrets.FTP_SERVER }}/www/.htaccess" \
            --user "${{ secrets.FTP_USERNAME }}:${{ secrets.FTP_PASSWORD }}"

      - name: Upload Akrasia files via FTP
        uses: SamKirkland/FTP-Deploy-Action@v4.3.5
        with:
          server: ${{ secrets.FTP_SERVER }}
          username: ${{ secrets.FTP_USERNAME }}
          password: ${{ secrets.FTP_PASSWORD }}
          server-dir: /www/akrasia/
          exclude: |
            **/.git*
            **/.git*/**
            .github/**
            _server/**
            uploads/**
            Akrasia/**
            CLAUDE.md
